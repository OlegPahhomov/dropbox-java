<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Simple file uploader</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/3.0.2/normalize.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="libs/mousewheel/jquery.mousewheel-3.0.6.pack.js"></script>
    <script src="libs/microtemplate/microtemplating.js"></script>

    <script src="libs/jquery-validation-1.14.0/dist/jquery.validate.min.js"></script>
    <script src="libs/jquery-validation-1.14.0/dist/additional-methods.min.js"></script>

    <link rel="stylesheet" href="libs/fancybox/source/jquery.fancybox.css">
    <script src="libs/fancybox/source/jquery.fancybox.pack.js"></script>

    <link rel="stylesheet" href="libs/fancybox/source/helpers/jquery.fancybox-buttons.css" type="text/css"
          media="screen"/>
    <script type="text/javascript" src="libs/fancybox/source/helpers/jquery.fancybox-buttons.js"></script>
    <script type="text/javascript" src="libs/fancybox/source/helpers/jquery.fancybox-media.js"></script>
    <link rel="stylesheet" href="libs/fancybox/source/helpers/jquery.fancybox-buttons.css" type="text/css"
          media="screen"/>
    <script type="text/javascript" src="libs/fancybox/source/helpers/jquery.fancybox-thumbs.js"></script>


    <!-- my stuff -->
    <script src="js/load-files.js"></script>
    <link rel="stylesheet" type="text/css" href="css/files.css">
    <link rel="stylesheet" type="text/css" href="css/upload-form.css">
    <script type="text/javascript">
        $(document).ready(function () {
            $('.fancybox').fancybox();
        });
    </script>
    <script type="text/javascript">
        $(function ($) {
            $('#fileForm').validate({
                rules: {},
                messages: {},
                submitHandler: function () {
                    return false
                }
            });
            $('input[name^="file"]').rules('add', {
                required: true,
                accept: "image/jpeg, image/jpg"
            })
        })
    </script>
</head>
<body>
<div id="content">


    <!--List files-->
    <!--List files-->
    <!--List files-->
    <div id="show_files">Loading...</div>
    <script>fileLoader.load();</script>
    <script type="text/html" id="show_files_template">
        <div class="heading"><h3>List Of Files</h3></div>
        <div class="file-container">
            <% for ( var i = 0; i < files.length; i++ ) { %>

            <div class="<%=getRatioClass(files[i]) %>">

                <a class="fancybox"
                   href="<%= '#show_popup_link_' + files[i].id %>"
                   rel="pictures"
                   title="<%=files[i].name %>">

                    <img title="<%=files[i].name %>" src="http://localhost:4567/picture/<%= files[i].id %>" alt>
                </a>

                <div class="file-fullscreen" id="<%= 'show_popup_link_' + files[i].id %>" style="display: none;">
                    <img src="http://localhost:4567/picture/<%= files[i].id %>">
                </div>

                <form method="post" action="http://localhost:4567/remove/<%= files[i].id %>">
                    <button type="submit" class="close" title="Delete file">&times;</button>
                </form>
            </div>

            <% } %>
        </div>
    </script>


    <!-- upload form-->
    <!-- upload form-->
    <!-- upload form-->
    <form id="fileForm" method="post" enctype="multipart/form-data" action="http://localhost:4567/add">
        <div class="heading">
            <h3>Upload new file</h3>
        </div>
        <div class="upload-block">
            <div class="upload-block__item upload-block__item--big">
                <input name="name" type="text" placeholder="Enter file name" class="upload-block__item--big"
                       id="textinput"
                       accept="image/*"
                       required
                       multiple/>
            </div>
            <div class="upload-block__item upload-block__item--big">
                <input id="file" name="file" type="file" class="inherit-width upload-item-input"
                       style="height:100%; width:100%" required/>
            </div>
            <div class="upload-block__item">
                <input type="submit" class="inherit-width" value="Add file">
            </div>
        </div>
    </form>
</div>


</body>
</html>